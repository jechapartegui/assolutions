
<div class="container">
  <ng-container *ngIf="vue == 'LISTE'">
    <ng-container *ngIf="editFluxFlinancier">

    </ng-container>
    <ng-container *ngIf="!editFluxFlinancier">
      
    </ng-container>
    </ng-container>
  <ng-container *ngIf="vue == 'COMPTA'">
    
    </ng-container>
  <ng-container *ngIf="vue == 'BUDGET'">
    
    </ng-container>
</div>
<div class="container" *ngIf="FluxFinanciers && vue == 'COMPTA'">
 
  <ng-container *ngFor="let cl of ClassesComptable">
    <ng-container *ngIf="IsCC(cl)">
      <div class="card">
        <header class="card-header">
          <p class="card-header-title">{{ cl.numero }} - {{ cl.libelle }}</p>
          <button (click)="Ajouter(cl.numero)" class="card-header-icon" aria-label="more options">
            <span class="icon">
              <i class="fa-solid fa-plus"></i>
            </span>
          </button>
        </header>
        <div class="card-content">
          <table
            class="table"
            style="width: 100%; font-size: smaller"
            *ngIf="FluxFinanciers && FluxFinanciers.length > 0"
          >
            <thead>
              <tr>
                <th>
                  <span class="th_filtre">
                    <span class="ligne">
                      <span style="font-size: smaller" i18n
                        >Date comptable</span
                      >
                      <span style="cursor: pointer">
                        <i
                          *ngIf="sort_date_ff === 'NO'"
                          (click)="Sort_ff('ASC', 'date')"
                          class="fa-solid fa-sort"
                        ></i>
                        <i
                          *ngIf="sort_date_ff === 'ASC'"
                          (click)="Sort_ff('DESC', 'date')"
                          class="fa-solid fa-sort-up"
                        ></i>
                        <i
                          *ngIf="sort_date_ff === 'DESC'"
                          (click)="Sort_ff('ASC', 'date')"
                          class="fa-solid fa-sort-down"
                        ></i> </span
                    ></span>
                  </span>
                </th>
                <th>
                  <span class="th_filtre">
                    <span class="ligne">
                      <span style="font-size: smaller" i18n>Montant</span>
                      <span style="cursor: pointer">
                        <i
                          *ngIf="sort_montant_ff === 'NO'"
                          (click)="Sort_ff('ASC', 'montant')"
                          class="fa-solid fa-sort"
                        ></i>
                        <i
                          *ngIf="sort_montant_ff === 'ASC'"
                          (click)="Sort_ff('DESC', 'montant')"
                          class="fa-solid fa-sort-up"
                        ></i>
                        <i
                          *ngIf="sort_montant_ff === 'DESC'"
                          (click)="Sort_ff('ASC', 'montant')"
                          class="fa-solid fa-sort-down"
                        ></i> </span
                    ></span>
                  </span>
                </th>
                <th>
                  <span class="th_filtre">
                    <span class="ligne">
                      <span style="font-size: smaller" i18n>R / D</span
                      ><span style="cursor: pointer">
                        <i
                          *ngIf="sort_sens_ff === 'NO'"
                          (click)="Sort_ff('ASC', 'sens')"
                          class="fa-solid fa-sort"
                        ></i>
                        <i
                          *ngIf="sort_sens_ff === 'ASC'"
                          (click)="Sort_ff('DESC', 'sens')"
                          class="fa-solid fa-sort-up"
                        ></i>
                        <i
                          *ngIf="sort_sens_ff === 'DESC'"
                          (click)="Sort_ff('ASC', 'sens')"
                          class="fa-solid fa-sort-down"
                        ></i>
                      </span>
                    </span>
                  </span>
                </th>
                <th>
                  <span class="th_filtre">
                    <span class="ligne">
                      <span style="font-size: smaller" i18n>Libellé</span>
                      <span style="cursor: pointer">
                        <i
                          *ngIf="sort_libelle_ff === 'NO'"
                          (click)="Sort_ff('ASC', 'libelle_ff')"
                          class="fa-solid fa-sort"
                        ></i>
                        <i
                          *ngIf="sort_libelle_ff === 'ASC'"
                          (click)="Sort_ff('DESC', 'libelle_ff')"
                          class="fa-solid fa-sort-up"
                        ></i>
                        <i
                          *ngIf="sort_libelle_ff === 'DESC'"
                          (click)="Sort_ff('ASC', 'libelle_ff')"
                          class="fa-solid fa-sort-down"
                        ></i>
                      </span>
                    </span>
                  </span>
                </th>
                <th>
                  <span style="font-size: smaller" i18n>Destinataire</span>
                </th>
                <th>
                  <span style="font-size: smaller" i18n>Statut</span>
                </th>
                <th><span style="font-size: smaller" i18n>Action</span></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let cpt of FFByClass(cl.numero)">
                <td>
                  {{ cpt.date | date : "dd/MM/yyyy" }}
                </td>
                <td>
                  {{ cpt.montant }}
                </td>
                <td>
                  <i
                    *ngIf="cpt.montant>0"
                    style="color: green"
                    class="fas fa-plus-square"
                  ></i>
                  <i
                    *ngIf="cpt.montant <= 0"
                    style="color: red"
                    class="fas fa-minus-square"
                  ></i>
                </td>
                <td>
                  {{ cpt.libelle }}
                </td>
                <td>
                  {{ cpt.destinataire.value }}
                </td>
                <td>
                  <span *ngIf="cpt.statut == 0" i18n>Non exécuté</span>
                  <span *ngIf="cpt.statut == 1" i18n>Exécuté</span>
                  <span *ngIf="cpt.statut == -1" i18n>Annulé</span>
                </td>
                <td>
                  <div class="buttons">
                    <button
                      i18n-title
                      title="Supprimer"
                      class="button is-danger is-rounded is-outlined"
                      type="button"
                      (click)="Delete_ff(cpt)"
                    >
                      <i class="fa-solid fa-trash-can"></i>
                    </button>
                    <button
                      *ngIf="cpt.statut != 1"
                      i18n-title
                      title="Payer maintenant"
                      class="button is-info is-rounded is-outlined"
                      type="button"
                      (click)="Payer_ff(cpt)"
                    >
                      <i class="fas fa-coins"></i>
                    </button>
                    <button
                      i18n-title
                      title="Editer"
                      class="button is-info is-rounded is-outlined"
                      type="button"
                      (click)="Read_ff(cpt)"
                    >
                      <i class="fa-solid fa-binoculars"></i>
                    </button>
                    <button
                      i18n-title
                      title="Editer"
                      class="button is-info is-rounded is-outlined"
                      type="button"
                      (click)="Edit_ff(cpt.id)"
                    >
                      <i class="fa-solid fa-pen-to-square"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </ng-container>
  </ng-container>
</div>
<div class="container" *ngIf="FluxFinanciers && context == 'LISTE'">
  <button
    (click)="context = 'COMPTA'"
    class="button is-outlined is-rounded is-primary"
    type="button"
  >
    <span i18n>Vue comptable</span>
  </button>
  <button
  (click)="Ajouter()"
  class="button is-outlined is-rounded is-primary"
  type="button"
>
  <span i18n>Ajouter</span>
  
              <i class="fa-solid fa-plus"></i>
</button>
  <div class="card">
    <header class="card-header">
      <p class="card-header-title">Liste des transactions annuelles</p>
      <button class="card-header-icon" aria-label="more options">
        <span class="icon">
          <i class="fas fa-angle-down" aria-hidden="true"></i>
        </span>
      </button>
    </header>
    <div class="card-content">
      <table
        class="table"
        style="width: 100%; font-size: smaller"
        *ngIf="FluxFinanciers && FluxFinanciers.length > 0"
      >
        <thead>
          <tr>
            <th>
              <span class="th_filtre">
                <span class="ligne">
                  <span style="font-size: smaller" i18n>Date comptable</span>
                  <span style="cursor: pointer">
                    <i
                      *ngIf="sort_date_ff === 'NO'"
                      (click)="Sort_ff('ASC', 'date')"
                      class="fa-solid fa-sort"
                    ></i>
                    <i
                      *ngIf="sort_date_ff === 'ASC'"
                      (click)="Sort_ff('DESC', 'date')"
                      class="fa-solid fa-sort-up"
                    ></i>
                    <i
                      *ngIf="sort_date_ff === 'DESC'"
                      (click)="Sort_ff('ASC', 'date')"
                      class="fa-solid fa-sort-down"
                    ></i> </span
                ></span>
              </span>
            </th>
            <th>
              <span class="th_filtre">
                <span class="ligne">
                  <span style="font-size: smaller" i18n>Montant</span>
                  <span style="cursor: pointer">
                    <i
                      *ngIf="sort_montant_ff === 'NO'"
                      (click)="Sort_ff('ASC', 'montant')"
                      class="fa-solid fa-sort"
                    ></i>
                    <i
                      *ngIf="sort_montant_ff === 'ASC'"
                      (click)="Sort_ff('DESC', 'montant')"
                      class="fa-solid fa-sort-up"
                    ></i>
                    <i
                      *ngIf="sort_montant_ff === 'DESC'"
                      (click)="Sort_ff('ASC', 'montant')"
                      class="fa-solid fa-sort-down"
                    ></i> </span
                ></span>
              </span>
            </th>
            <th>
              <span class="th_filtre">
                <span class="ligne">
                  <span style="font-size: smaller" i18n>R / D</span
                  ><span style="cursor: pointer">
                    <i
                      *ngIf="sort_sens_ff === 'NO'"
                      (click)="Sort_ff('ASC', 'sens')"
                      class="fa-solid fa-sort"
                    ></i>
                    <i
                      *ngIf="sort_sens_ff === 'ASC'"
                      (click)="Sort_ff('DESC', 'sens')"
                      class="fa-solid fa-sort-up"
                    ></i>
                    <i
                      *ngIf="sort_sens_ff === 'DESC'"
                      (click)="Sort_ff('ASC', 'sens')"
                      class="fa-solid fa-sort-down"
                    ></i>
                  </span>
                </span>
              </span>
            </th>
            <th>
              <span class="th_filtre">
                <span class="ligne">
                  <span style="font-size: smaller" i18n>Libellé</span>
                  <span style="cursor: pointer">
                    <i
                      *ngIf="sort_libelle_ff === 'NO'"
                      (click)="Sort_ff('ASC', 'libelle_ff')"
                      class="fa-solid fa-sort"
                    ></i>
                    <i
                      *ngIf="sort_libelle_ff === 'ASC'"
                      (click)="Sort_ff('DESC', 'libelle_ff')"
                      class="fa-solid fa-sort-up"
                    ></i>
                    <i
                      *ngIf="sort_libelle_ff === 'DESC'"
                      (click)="Sort_ff('ASC', 'libelle_ff')"
                      class="fa-solid fa-sort-down"
                    ></i>
                  </span>
                </span>
              </span>
            </th>
            <th>
              <span style="font-size: smaller" i18n>Destinataire</span>
            </th>
            <th>
              <span style="font-size: smaller" i18n>Statut</span>
            </th>
            <th><span style="font-size: smaller" i18n>Action</span></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let cpt of this.FluxFinanciers">
            <td>
              {{ cpt.date | date : "dd/MM/yyyy" }}
            </td>
            <td>
              {{ cpt.montant }}
            </td>
            <td>
              <i
                *ngIf="cpt.montant >0"
                style="color: green"
                class="fas fa-plus-square"
              ></i>
              <i
                *ngIf="cpt.montant <= 0"
                style="color: red"
                class="fas fa-minus-square"
              ></i>
            </td>
            <td>
              {{ cpt.libelle }}
            </td>
            <td>
              {{ cpt.destinataire.value }}
            </td>
            <td>
              <span *ngIf="cpt.statut == 0" i18n>Non exécuté</span>
              <span *ngIf="cpt.statut == 1" i18n>Exécuté</span>
              <span *ngIf="cpt.statut == -1" i18n>Annulé</span>
            </td>
            <td>
              <div class="buttons">
                <button
                  i18n-title
                  title="Supprimer"
                  class="button is-danger is-rounded is-outlined"
                  type="button"
                  (click)="Delete_ff(cpt)"
                >
                  <i class="fa-solid fa-trash-can"></i>
                </button>
                <button
                  *ngIf="cpt.statut != 1"
                  i18n-title
                  title="Payer maintenant"
                  class="button is-info is-rounded is-outlined"
                  type="button"
                  (click)="Payer_ff(cpt)"
                >
                  <i class="fas fa-coins"></i>
                </button>
                <button
                  i18n-title
                  title="Editer"
                  class="button is-info is-rounded is-outlined"
                  type="button"
                  (click)="Read_ff(cpt)"
                >
                  <i class="fa-solid fa-binoculars"></i>
                </button>
                <button
                  i18n-title
                  title="Editer"
                  class="button is-info is-rounded is-outlined"
                  type="button"
                  (click)="Edit_ff(cpt.id)"
                >
                  <i class="fa-solid fa-pen-to-square"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
