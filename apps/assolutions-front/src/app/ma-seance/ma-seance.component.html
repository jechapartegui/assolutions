<ng-container *ngIf="store.isLoggedIn(); else NonConnecte">
<ng-container *ngIf="thisSeance">
  <ng-container *ngIf="!isLien">

  <!-- ====== DESKTOP / TABLET ====== -->
  <span class="fullscreen">
    <div class="columns page-fill">
      <div class="column">
        <div class="card">
          <header class="card-header" style="align-items: center">
            <p class="card-header-title">
              {{ thisSeance.libelle }}&nbsp;{{ seanceText }}
            </p>
          </header>

          <!-- ====== CARD CONTENT ====== -->
          <div class="card-content" #scrollableContent>
            <div class="content">

              <!-- ====== PANNEAUX D'OPTIONS (remplacent la liste) ====== -->
              <ng-container *ngIf="uiMode !== 'list'">
                <!-- Toolbar locale du panneau -->
                <div class="ms-panel-toolbar">
                  <button class="button is-light is-rounded btn-compact"
                          (click)="closePanel()">
                    <span class="icon"><i class="fas fa-arrow-left"></i></span>
                    <span>Retour</span>
                  </button>

                  <span class="ms-panel-title" *ngIf="uiMode==='convocation'">
                    <i class="fas fa-paper-plane"></i>&nbsp;Convocation
                  </span>
                  <span class="ms-panel-title" *ngIf="uiMode==='annulation'">
                    <i class="fas fa-ban"></i>&nbsp;Annulation
                  </span>
                  <span class="ms-panel-title" *ngIf="uiMode==='ajout'">
                    <i class="fas fa-user-plus"></i>&nbsp;Ajouter une personne
                  </span>
                  <span class="ms-panel-title" *ngIf="uiMode==='note'">
                    <i class="fas fa-sticky-note"></i>&nbsp;Note séance
                  </span>
                </div>

                <!-- CONVOCATION -->
                <div *ngIf="uiMode==='convocation'" class="ms-panel">
                  <div class="ms-form grid-2">
                    <div>
                      <label class="label">Destinataires</label>
                      <div class="ms-recipients">
                        <label class="checkbox" *ngFor="let p of All">
                          <input type="checkbox"
                                 [checked]="isChecked(p, 'convocation')"
                                 (change)="toggleRecipient(p, 'convocation', $any($event.target).checked)">
                          <span class="ms-rec-name">{{ p.person.libelle }}</span>
                          <span class="tag is-light ms-badge" *ngIf="p.statut_inscription">
                            {{ p.statut_inscription }}
                          </span>
                        </label>
                      </div>
                      <div class="buttons is-right mt-2">
                        <button class="button is-small is-light is-rounded btn-compact"
                                (click)="checkAll('convocation', true)">Tout sélectionner</button>
                        <button class="button is-small is-light is-rounded btn-compact"
                                (click)="checkAll('convocation', false)">Tout désélectionner</button>
                      </div>
                    </div>

                    <div>
                      <label class="label">Sujet</label>
                                   <mail-template-preview
  [html]="mailSubject"
  [variables]="variables"
  [notes]="Notes">
</mail-template-preview>
<label class="label mt-2" i18n>Customisation du message</label>
<textarea class="textarea" rows="4" [(ngModel)]="Notes"></textarea>
<label class="label mt-2" i18n>Visualisation du message</label>

<mail-template-preview
  [html]="mailBody"
  [variables]="variables"
  [notes]="Notes">
</mail-template-preview>

                      <div class="buttons is-right mt-3">
                        <button class="button is-primary is-light is-rounded btn-compact"
                                [disabled]="!selectedRecipients.length"
                                (click)="sendMail('convocation')">
                          <i class="fas fa-paper-plane"></i>&nbsp;Envoyer
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- ANNULATION -->
                <div *ngIf="uiMode==='annulation'" class="ms-panel">
                  <div class="ms-form grid-2">
                    <div>
                      <label class="label">Destinataires</label>
                      <div class="ms-recipients">
                        <label class="checkbox" *ngFor="let p of All">
                          <input type="checkbox"
                                 [checked]="isChecked(p, 'annulation')"
                                 (change)="toggleRecipient(p, 'annulation', $any($event.target).checked)">
                          <span class="ms-rec-name">{{ p.person.libelle }}</span>
                          <span class="tag is-light ms-badge" *ngIf="p.statut_inscription">
                            {{ p.statut_inscription }}
                          </span>
                        </label>
                      </div>
                      <div class="buttons is-right mt-2">
                        <button class="button is-small is-info is-light is-rounded btn-compact"
                                (click)="checkAll('annulation', true)">Tout sélectionner</button>
                        <button class="button is-small is-info is-light is-rounded btn-compact"
                                (click)="checkAll('annulation', false)">Tout désélectionner</button>
                      </div>
                    </div>

                    <div>
                      <label class="label">Sujet</label>

              <label class="label">Sujet</label>
                                   <mail-template-preview
  [html]="mailSubject"
  [variables]="variables"
  [notes]="Notes">
</mail-template-preview>
<label class="label mt-2">Message</label>
<textarea class="textarea" rows="4" [(ngModel)]="Notes"></textarea>

<mail-template-preview
  [html]="mailBody"
  [variables]="variables"
  [notes]="Notes">
</mail-template-preview>

                      <div class="buttons is-right mt-3">
                        <button class="button is-success is-light is-rounded btn-compact"
                                [disabled]="!selectedRecipients.length"
                                (click)="sendMail('annulation')">
                          <i class="fas fa-paper-plane"></i>&nbsp;Envoyer
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- AJOUT PERSONNE -->
                <div *ngIf="uiMode==='ajout'" class="ms-panel">
                  <div class="field is-horizontal" style="gap:.75rem; align-items:center;">
                    <div class="field-label is-normal">
                      <label class="label" style="white-space: nowrap">Sélection adhérent</label>
                    </div>
                    <div class="field-body">
                      <div class="field is-narrow">
                        <div class="control">
                          <div class="select is-fullwidth">
                            <select [(ngModel)]="adherent_to">
                              <ng-container *ngFor="let add of Autres">
                                <option [ngValue]="add">{{ add.libelle }}</option>
                              </ng-container>
                            </select>
                          </div>
                        </div>
                      </div>
                    </div>
                    <button class="button is-primary is-light is-rounded btn-compact"
                            [disabled]="!adherent_to"
                            (click)="AjouterAdherentsHorsGroupe(); closePanel()">
                      <i class="fas fa-user-plus"></i>&nbsp;Ajouter
                    </button>
                  </div>
                </div>

                <!-- NOTE SÉANCE -->
                <div *ngIf="uiMode==='note'" class="ms-panel">
                  <label class="label">Info séance</label>
                  <textarea class="textarea" rows="8"
                            [(ngModel)]="thisSeance.info_seance"></textarea>
                  <div class="buttons is-right mt-3">
                    <button class="button is-link is-light is-rounded btn-compact" (click)="saveInfoSeance()">Enregistrer</button>
                  </div>
                </div>
              </ng-container>

              <!-- ====== LISTES (mode normal) ====== -->
              <ng-container *ngIf="uiMode === 'list'">

                <!-- Présences potentielles -->
                <h6 class="title is-6" style="cursor:pointer;"
                    (click)="display_personne = !display_personne">
                  <i class="fas"
                     [ngClass]="display_personne ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
                  &nbsp;<span i18n>Présences potentielles</span>&nbsp;({{ All.length }}&nbsp;<span i18n>personnes</span>)
                </h6>

                <span *ngIf="display_personne">
                <ng-container *ngFor="let potentiel of All">
                  <ng-container *ngIf="!potentiel.statut_seance">
                    <ng-container *ngIf="potentiel.statut_inscription === 'présent'" >
                      <div class="ligne">
                                                <span class="partie1">
                          <span class="icon is-medium">
                            <span
                              class="fa-stack fa-sm"     (click)="openMenu(potentiel, $event)"
                              (click)="potentiel.isVisible = true"
                            >
                              <i class="fas fa-stack-2x fa-thumbs-up has-text-success" ></i>
                            </span>
                          </span>
                          <ul
                            class="menu-icons"
                            [ngClass]="{
                              'is-visible': potentiel.isVisible,
                              not: !potentiel.isVisible
                            }"
    (click)="$event.stopPropagation()">
                            <li (click)="setStatusAndClose('présent', potentiel, $event)">
    <i class="fas fa-thumbs-up"></i> Présent
  </li>
  <li (click)="setStatusAndClose('absent', potentiel, $event)">
    <i class="fas fa-thumbs-down"></i> Absent
  </li>
  <li (click)="setStatusAndClose('essai', potentiel, $event)">
    <i class="fas fa-question"></i> Essai
  </li>
  <li (click)="setStatusAndClose('convoqué', potentiel, $event)">
    <i class="fas fa-hand-point-up"></i> Convoqué
  </li>
  <li (click)="setStatusAndClose(null, potentiel, $event)">
    <i class="fas fa-ellipsis-h"></i> Non défini
  </li>
                          </ul>
                          <span class="nom_personne">{{
                            potentiel.person.libelle
                          }}</span>
                          <span [title]="contact_urgence_nom(potentiel)">{{
                            contact_urgence(potentiel)
                          }}</span>
                        </span>
                        <div class="buttons has-addons">
                          <button
                            type="button"
                            class="button is-outlined is-rounded is-primary"
                            (click)="MAJInscription(potentiel, true)"
                            [disabled]="!GetNbPersonne(Presents)"
                          >
                            <i class="fas fa-check"></i>
                          </button>
                          <button
                            type="button"
                            class="button is-outlined is-rounded is-danger"
                            (click)="MAJInscription(potentiel, false)"
                          >
                            <i class="fas fa-times"></i>
                          </button>
                        </div>
                      </div>
                    </ng-container>
                  </ng-container>
                </ng-container>
                <ng-container *ngFor="let potentiel of All">
                  <ng-container *ngIf="!potentiel.statut_seance">
                    <ng-container *ngIf="potentiel.statut_inscription === 'essai'"  >
                      <div class="ligne">
                        <span class="partie1">
                          <span class="icon is-medium">
                            <span
                              class="fa-stack fa-sm"     (click)="openMenu(potentiel, $event)"
                              (click)="potentiel.isVisible = true"
                            >
                              <i class="fas fa-stack-2x fa-question"></i>
                            </span>
                          </span>
                          <ul
                            class="menu-icons"
                            [ngClass]="{
                              'is-visible': potentiel.isVisible,
                              not: !potentiel.isVisible
                            }"
    (click)="$event.stopPropagation()">
                            <li (click)="setStatusAndClose('présent', potentiel, $event)">
    <i class="fas fa-thumbs-up"></i> Présent
  </li>
  <li (click)="setStatusAndClose('absent', potentiel, $event)">
    <i class="fas fa-thumbs-down"></i> Absent
  </li>
  <li (click)="setStatusAndClose('essai', potentiel, $event)">
    <i class="fas fa-question"></i> Essai
  </li>
  <li (click)="setStatusAndClose('convoqué', potentiel, $event)">
    <i class="fas fa-hand-point-up"></i> Convoqué
  </li>
  <li (click)="setStatusAndClose(null, potentiel, $event)">
    <i class="fas fa-ellipsis-h"></i> Non défini
  </li>
                          </ul>
                          <span class="nom_personne">{{
                            potentiel.person.libelle
                          }}</span>
                          <span [title]="contact_urgence_nom(potentiel)">{{
                            contact_urgence(potentiel)
                          }}</span>
                        </span>
                        <div class="buttons has-addons">
                          <button
                            type="button"
                            class="button is-outlined is-rounded is-primary"
                            (click)="MAJInscription(potentiel, true)"
                            [disabled]="!GetNbPersonne(Presents)"
                          >
                            <i class="fas fa-check"></i>
                          </button>
                          <button
                            type="button"
                            class="button is-outlined is-rounded is-danger"
                            (click)="MAJInscription(potentiel, false)"
                          >
                            <i class="fas fa-times"></i>
                          </button>
                        </div>
                      </div>
                    </ng-container>
                  </ng-container>
                </ng-container>
                <ng-container *ngFor="let potentiel of All">
                  <ng-container *ngIf="!potentiel.statut_seance">
                    <ng-container *ngIf="potentiel.statut_inscription === 'convoqué'" >
                      <div class="ligne">
                        <span class="partie1">
                          <span class="icon is-medium">
                            <span
                              class="fa-stack fa-sm"     (click)="openMenu(potentiel, $event)"
                              (click)="potentiel.isVisible = true"
                            >
                              <i  class="fas fa-stack-2x fa-hand-point-up has-text-info"></i>
                            </span>
                          </span>
                          <ul
                            class="menu-icons"
                            [ngClass]="{
                              'is-visible': potentiel.isVisible,
                              not: !potentiel.isVisible
                            }"
    (click)="$event.stopPropagation()">
                            <li (click)="setStatusAndClose('présent', potentiel, $event)">
    <i class="fas fa-thumbs-up"></i> Présent
  </li>
  <li (click)="setStatusAndClose('absent', potentiel, $event)">
    <i class="fas fa-thumbs-down"></i> Absent
  </li>
  <li (click)="setStatusAndClose('essai', potentiel, $event)">
    <i class="fas fa-question"></i> Essai
  </li>
  <li (click)="setStatusAndClose('convoqué', potentiel, $event)">
    <i class="fas fa-hand-point-up"></i> Convoqué
  </li>
  <li (click)="setStatusAndClose(null, potentiel, $event)">
    <i class="fas fa-ellipsis-h"></i> Non défini
  </li>
                          </ul>
                          <span class="nom_personne">{{
                            potentiel.person.libelle
                          }}</span>
                          <span [title]="contact_urgence_nom(potentiel)">{{
                            contact_urgence(potentiel)
                          }}</span>
                        </span>
                        <div class="buttons has-addons">
                          <button
                            type="button"
                            class="button is-outlined is-rounded is-primary"
                            (click)="MAJInscription(potentiel, true)"
                            [disabled]="!GetNbPersonne(Presents)"
                          >
                            <i class="fas fa-check"></i>
                          </button>
                          <button
                            type="button"
                            class="button is-outlined is-rounded is-danger"
                            (click)="MAJInscription(potentiel, false)"
                          >
                            <i class="fas fa-times"></i>
                          </button>
                        </div>
                      </div>
                    </ng-container>
                  </ng-container>
                </ng-container>
                <ng-container *ngFor="let potentiel of All">
                  <ng-container *ngIf="!potentiel.statut_seance">
                    <ng-container *ngIf="potentiel.statut_inscription === 'absent'" >
                      <div class="ligne">
                            <span class="partie1">
                          <span class="icon is-medium">
                            <span
                              class="fa-stack fa-sm"     (click)="openMenu(potentiel, $event)"
                              (click)="potentiel.isVisible = true"
                            >
                              <i  class="fas fa-stack-2x fa-thumbs-down has-text-danger"></i>
                            </span>
                          </span>
                          <ul
                            class="menu-icons"
                            [ngClass]="{
                              'is-visible': potentiel.isVisible,
                              not: !potentiel.isVisible
                            }"
    (click)="$event.stopPropagation()">
                            <li (click)="setStatusAndClose('présent', potentiel, $event)">
    <i class="fas fa-thumbs-up"></i> Présent
  </li>
  <li (click)="setStatusAndClose('absent', potentiel, $event)">
    <i class="fas fa-thumbs-down"></i> Absent
  </li>
  <li (click)="setStatusAndClose('essai', potentiel, $event)">
    <i class="fas fa-question"></i> Essai
  </li>
  <li (click)="setStatusAndClose('convoqué', potentiel, $event)">
    <i class="fas fa-hand-point-up"></i> Convoqué
  </li>
  <li (click)="setStatusAndClose(null, potentiel, $event)">
    <i class="fas fa-ellipsis-h"></i> Non défini
  </li>
                          </ul>
                          <span class="nom_personne">{{
                            potentiel.person.libelle
                          }}</span>
                          <span [title]="contact_urgence_nom(potentiel)">{{
                            contact_urgence(potentiel)
                          }}</span>
                        </span>
                        <div class="buttons has-addons">
                          <button
                            type="button"
                            class="button is-outlined is-rounded is-primary"
                            (click)="MAJInscription(potentiel, true)"
                            [disabled]="!GetNbPersonne(Presents)"
                          >
                            <i class="fas fa-check"></i>
                          </button>
                          <button
                            type="button"
                            class="button is-outlined is-rounded is-danger"
                            (click)="MAJInscription(potentiel, false)"
                          >
                            <i class="fas fa-times"></i>
                          </button>
                        </div>
                      </div>
                    </ng-container>
                  </ng-container>
                </ng-container>
                <ng-container *ngFor="let potentiel of All">
                  <ng-container *ngIf="!potentiel.statut_seance">
                    <ng-container *ngIf="!potentiel.statut_inscription">
                      <div class="ligne">
                                                    <span class="partie1">
                          <span class="icon is-medium">
                            <span
                              class="fa-stack fa-sm"     (click)="openMenu(potentiel, $event)"
                              (click)="potentiel.isVisible = true"
                            >
                              <i  class="fas fa-stack-2x fa-ellipsis-h"></i>
                            </span>
                          </span>
                          <ul
                            class="menu-icons"
                            [ngClass]="{
                              'is-visible': potentiel.isVisible,
                              not: !potentiel.isVisible
                            }"
    (click)="$event.stopPropagation()">
                            <li (click)="setStatusAndClose('présent', potentiel, $event)">
    <i class="fas fa-thumbs-up"></i> Présent
  </li>
  <li (click)="setStatusAndClose('absent', potentiel, $event)">
    <i class="fas fa-thumbs-down"></i> Absent
  </li>
  <li (click)="setStatusAndClose('essai', potentiel, $event)">
    <i class="fas fa-question"></i> Essai
  </li>
  <li (click)="setStatusAndClose('convoqué', potentiel, $event)">
    <i class="fas fa-hand-point-up"></i> Convoqué
  </li>
  <li (click)="setStatusAndClose(null, potentiel, $event)">
    <i class="fas fa-ellipsis-h"></i> Non défini
  </li>
                          </ul>
                          <span class="nom_personne">{{
                            potentiel.person.libelle
                          }}</span>
                          <span [title]="contact_urgence_nom(potentiel)">{{
                            contact_urgence(potentiel)
                          }}</span>
                        </span>
                        <div class="buttons has-addons">
                          <button
                            type="button"
                            class="button is-outlined is-rounded is-primary"
                            (click)="MAJInscription(potentiel, true)"
                            [disabled]="!GetNbPersonne(Presents)"
                          >
                            <i class="fas fa-check"></i>
                          </button>
                          <button
                            type="button"
                            class="button is-outlined is-rounded is-danger"
                            (click)="MAJInscription(potentiel, false)"
                          >
                            <i class="fas fa-times"></i>
                          </button>
                        </div>
                      </div>
                    </ng-container>
                  </ng-container>
                </ng-container>
                </span>

                <!-- Présents -->
                <h6 class="title is-6" style="cursor:pointer;"
                    (click)="display_present = !display_present">
                  <i class="fas"
                     [ngClass]="display_present ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
                  &nbsp;<span i18n>Présents</span>&nbsp;({{ Presents.length }}&nbsp;<span i18n>personnes</span>)
                </h6>
       <span *ngIf="display_present">
                <ng-container *ngFor="let potentiel of Presents">
                  <ng-container *ngIf="potentiel.statut_seance">
                    <ng-container *ngIf="potentiel.statut_seance === 'présent'">
                      <div class="ligne">
                        <span class="partie1">
                          <span class="icon is-medium">
                            <span class="fa-stack fa-sm">
                              <i
                                *ngIf="potentiel.statut_inscription == 'présent'"
                                class="fas fa-stack-2x fa-thumbs-up"
                              ></i>
                              <i
                                *ngIf="potentiel.statut_inscription == 'absent'"
                                class="fas fa-stack-2x fa-thumbs-down"
                              ></i>
                              <i
                                *ngIf="potentiel.statut_inscription == 'essai'"
                                class="fas fa-stack-2x fa-question"
                              ></i>
                              <i
                                *ngIf="
                                  potentiel.statut_inscription == 'convoqué'
                                "
                                class="fas fa-stack-2x fa-hand-point-up"
                              ></i>
                              <i
                                *ngIf="potentiel.statut_inscription == null"
                                class="fas fa-stack-2x fa-ellipsis-h"
                              ></i>
                            </span>
                          </span>
                          <span class="nom_personne">{{
                            potentiel.person.libelle
                          }}</span>
                          <span [title]="contact_urgence_nom(potentiel)">{{
                            contact_urgence(potentiel)
                          }}</span>
                        </span>

                        <div class="buttons has-addons">
                          <button
                            type="button"
                            class="button is-rounded is-primary"
                            (click)="MAJInscription(potentiel, null)"
                          >
                            <i class="fas fa-check"></i>
                          </button>
                          <button
                            type="button"
                            class="button is-outlined is-rounded is-danger"
                            (click)="MAJInscription(potentiel, false)"
                          >
                            <i class="fas fa-times"></i>
                          </button>
                        </div>
                      </div>
                    </ng-container>
                  </ng-container>
                </ng-container>
              </span>
              <h6  style="cursor:pointer;"
                class="title is-6"
                (click)="
                  display_absent
                    ? (display_absent = false)
                    : (display_absent = true)
                "
              >
                <i *ngIf="!display_absent" class="fas fa-chevron-down"></i>
                <i *ngIf="display_absent" class="fas fa-chevron-up"></i> &nbsp;
                <span i18n>Absents</span>&nbsp;({{ Absents.length }}&nbsp;<span
                  i18n
                  >personnes</span
                >)
              </h6>
              <span *ngIf="display_absent">
              <ng-container *ngFor="let potentiel of Absents">
                <ng-container *ngIf="potentiel.statut_seance">
                  <ng-container *ngIf="potentiel.statut_seance === 'absent'">
                    <div class="ligne">
                      <span class="partie1">
                        <span class="icon is-medium">
                          <span class="fa-stack fa-sm">
                            <i
                              *ngIf="potentiel.statut_inscription == 'présent'"
                              class="fas fa-stack-2x fa-thumbs-up"
                            ></i>
                            <i
                              *ngIf="potentiel.statut_inscription == 'absent'"
                              class="fas fa-stack-2x fa-thumbs-down"
                            ></i>
                            <i
                              *ngIf="potentiel.statut_inscription == 'essai'"
                              class="fas fa-stack-2x fa-question"
                            ></i>
                            <i
                              *ngIf="potentiel.statut_inscription == 'convoqué'"
                              class="fas fa-stack-2x fa-hand-point-up"
                            ></i>
                            <i
                              *ngIf="potentiel.statut_inscription == null"
                              class="fas fa-stack-2x fa-ellipsis-h"
                            ></i>
                          </span>
                        </span>
                        <span class="nom_personne">{{
                          potentiel.person.libelle
                        }}</span>
                        <span [title]="contact_urgence_nom(potentiel)">{{
                          contact_urgence(potentiel)
                        }}</span>
                      </span>

                      <div class="buttons has-addons">
                        <button
                          type="button"
                          class="button is-outlined is-rounded is-primary"
                          [disabled]="!GetNbPersonne(Presents)"
                          (click)="MAJInscription(potentiel, true)"
                        >
                          <i class="fas fa-check"></i>
                        </button>
                        <button
                          type="button"
                          class="button is-rounded is-danger"
                          (click)="MAJInscription(potentiel, null)"
                        >
                          <i class="fas fa-times"></i>
                        </button>
                      </div>
                    </div>
                  </ng-container>
                </ng-container>
              </ng-container></span>

                <button class="scroll-to-top"
                        *ngIf="showScrollToTop"
                        (click)="scrollToTop()"
                        title="Revenir en haut">↑</button>
              </ng-container>
            </div>
          </div>

          <!-- ====== FOOTER Desktop ====== -->
          <footer class="card-footer">
            <div class="columns">
              <div class="column">
                <div class="buttons">
                  
                  <btn [type_button]="'RetourSmall'" (click)="RetourListe()"></btn>
                <div class="dropdown is-up is-right" [class.is-active]="optionsOpen">
                <div class="dropdown-trigger">
                  <button class="button is-small is-primary is-light btn-mobile btn-elevated"
                          aria-haspopup="true" aria-controls="dropdown-menu"
                          (click)="optionsOpen = !optionsOpen">
                    <span class="icon"><i class="fas fa-ellipsis-h"></i></span>
                    <span i18n>Options</span>
                  </button>
                </div>
                <div class="dropdown-menu" id="dropdown-menu" role="menu">
                  <div class="dropdown-content">
                    <a class="dropdown-item" (click)="openPanel('convocation')">
                      <i class="fas fa-paper-plane"></i>&nbsp;Envoyer convocation
                    </a>
                    <a class="dropdown-item" (click)="openPanel('annulation')">
                      <i class="fas fa-ban"></i>&nbsp;Envoyer annulation
                    </a>
                    <a class="dropdown-item" (click)="openPanel('ajout')">
                      <i class="fas fa-user-plus"></i>&nbsp;Ajouter une personne
                    </a>
                    <a class="dropdown-item" (click)="openPanel('note')">
                      <i class="fas fa-sticky-note"></i>&nbsp;Note séance
                    </a>
                  </div>
                </div>
              </div>

                </div>
              </div>
            </div>
          </footer>
        </div>
      </div>
    </div>
  </span>

  <!-- ====== MOBILE ====== -->
  <span class="mobile">
    <div class="container-box">
      <nav class="navbar is-fixed-top">
        <btn [type_button]="'RetourMobile'" (click)="uiMode!=='list' ? closePanel() : RetourListe()"></btn>
        <button class="button is-outlined is-primary btn-mobile btn-elevated"
                (click)="toggleMobileOptions = !toggleMobileOptions">
          <i class="fas fa-ellipsis-h"></i>&nbsp;<span>Options</span>
        </button>
        <div class="dropdown is-left" [class.is-active]="toggleMobileOptions">
          <div class="dropdown-menu">
            <div class="dropdown-content">
              <a class="dropdown-item" (click)="openPanel('convocation'); toggleMobileOptions=false">Envoyer convocation</a>
              <a class="dropdown-item" (click)="openPanel('annulation'); toggleMobileOptions=false">Envoyer annulation</a>
              <a class="dropdown-item" (click)="openPanel('ajout'); toggleMobileOptions=false">Ajouter une personne</a>
              <a class="dropdown-item" (click)="openPanel('note'); toggleMobileOptions=false">Note séance</a>
            </div>
          </div>
        </div>
      </nav>

      <p class="title is-5" style="margin-top:.5rem;">
        {{ thisSeance.libelle }}&nbsp;{{ seanceText }}
      </p>

      <!-- Contenu mobile : panneau d’options OU listes -->
      <ng-container *ngIf="uiMode !== 'list'">
        <!-- On réutilise les mêmes panneaux que desktop (markup identique) -->
        <div class="ms-panel-toolbar">
          <button class="button is-light is-rounded btn-compact" (click)="closePanel()">
            <span class="icon"><i class="fas fa-arrow-left"></i></span>
            <span>Retour</span>
          </button>
          <span class="ms-panel-title" *ngIf="uiMode==='convocation'"><i class="fas fa-paper-plane"></i>&nbsp;Convocation</span>
          <span class="ms-panel-title" *ngIf="uiMode==='annulation'"><i class="fas fa-ban"></i>&nbsp;Annulation</span>
          <span class="ms-panel-title" *ngIf="uiMode==='ajout'"><i class="fas fa-user-plus"></i>&nbsp;Ajouter une personne</span>
          <span class="ms-panel-title" *ngIf="uiMode==='note'"><i class="fas fa-sticky-note"></i>&nbsp;Note séance</span>
        </div>

        <div *ngIf="uiMode==='convocation'" class="ms-panel">
          <!-- même contenu que desktop -->
          <div class="ms-form grid-1">
            <div>
              <label class="label">Destinataires</label>
              <div class="ms-recipients">
                <label class="checkbox" *ngFor="let p of All">
                  <input type="checkbox"
                         [checked]="isChecked(p, 'convocation')"
                         (change)="toggleRecipient(p, 'convocation', $any($event.target).checked)">
                  <span class="ms-rec-name">{{ p.person.libelle }}</span>
                  <span class="tag is-light ms-badge" *ngIf="p.statut_inscription">{{ p.statut_inscription }}</span>
                </label>
              </div>
              <div class="buttons is-right mt-2">
                <button class="button is-small is-light is-rounded btn-compact" (click)="checkAll('convocation', true)">Tout sélectionner</button>
                <button class="button is-small is-light is-rounded btn-compact" (click)="checkAll('convocation', false)">Tout désélectionner</button>
              </div>
            </div>
            <div>
              <label class="label">Sujet</label>
              <mail-template-preview
  [html]="mailSubject"
  [variables]="variables"
  [notes]="Notes">
</mail-template-preview>
<label class="label mt-2">Message</label>
<textarea class="textarea" rows="4" [(ngModel)]="Notes"></textarea>

<mail-template-preview
  [html]="mailBody"
  [variables]="variables"
  [notes]="Notes">
</mail-template-preview>

              <div class="buttons is-right mt-3">
                <button class="button is-outlined is-primary btn-mobile btn-elevated" [disabled]="!selectedRecipients.length"
                        (click)="sendMail('convocation')">
                  <i class="fas fa-paper-plane"></i>&nbsp;Envoyer
                </button>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="uiMode==='annulation'" class="ms-panel">
          <!-- même contenu que desktop -->
          <div class="ms-form grid-1">
            <!-- … identique au bloc convocation, en remplaçant le preset par annulation … -->
            <div>
              <label class="label">Destinataires</label>
              <div class="ms-recipients">
                <label class="checkbox" *ngFor="let p of All">
                  <input type="checkbox"
                         [checked]="isChecked(p, 'annulation')"
                        (change)="toggleRecipient(p, 'annulation', $any($event.target).checked)">
                  <span class="ms-rec-name">{{ p.person.libelle }}</span>
                  <span class="tag is-light ms-badge" *ngIf="p.statut_inscription">{{ p.statut_inscription }}</span>
                </label>
              </div>
              <div class="buttons is-right mt-2">
                <button class="button is-small is-light is-rounded btn-compact" (click)="checkAll('annulation', true)">Tout sélectionner</button>
                <button class="button is-small is-light is-rounded btn-compact" (click)="checkAll('annulation', false)">Tout désélectionner</button>
              </div>
            </div>
            <div>
                          <label class="label">Sujet</label>
              <mail-template-preview
  [html]="mailSubject"
  [variables]="variables"
  [notes]="Notes">
</mail-template-preview>
<label class="label mt-2">Message</label>
<textarea class="textarea" rows="4" [(ngModel)]="Notes"></textarea>

<mail-template-preview
  [html]="mailBody"
  [variables]="variables"
  [notes]="Notes">
</mail-template-preview>
              <div class="buttons is-right mt-3">
                <button class="button is-danger is-light is-rounded btn-compact" [disabled]="!selectedRecipients.length"
                        (click)="sendMail('annulation')">
                  <i class="fas fa-paper-plane"></i>&nbsp;Envoyer
                </button>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="uiMode==='ajout'" class="ms-panel">
          <!-- même contenu que desktop -->
          <div class="field is-horizontal" style="gap:.75rem; align-items:center;">
            <div class="field-label is-normal">
              <label class="label" style="white-space: nowrap">Sélection adhérent</label>
            </div>
            <div class="field-body">
              <div class="field is-narrow">
                <div class="control">
                  <div class="select is-fullwidth">
                    <select [(ngModel)]="adherent_to">
                      <ng-container *ngFor="let add of Autres">
                        <option [ngValue]="add">{{ add.libelle }}</option>
                      </ng-container>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <button class="button is-primary is-light is-rounded btn-compact"
                    [disabled]="!adherent_to"
                    (click)="AjouterAdherentsHorsGroupe(); closePanel()">
              <i class="fas fa-user-plus"></i>&nbsp;Ajouter
            </button>
          </div>
        </div>

        <div *ngIf="uiMode==='note'" class="ms-panel">
          <label class="label">Info séance</label>
          <textarea class="textarea" rows="8" [(ngModel)]="thisSeance.info_seance"></textarea>
          <div class="buttons is-right mt-3">
            <button class="button is-link is-light is-rounded btn-compact" (click)="saveInfoSeance()">Enregistrer</button>
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="uiMode === 'list'">
                       <!-- Présences potentielles -->
                <h6 class="title is-6" style="cursor:pointer;"
                    (click)="display_personne = !display_personne">
                  <i class="fas"
                     [ngClass]="display_personne ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
                  &nbsp;<span i18n>Présences potentielles</span>&nbsp;({{ All.length }}&nbsp;<span i18n>personnes</span>)
                </h6>

                <span *ngIf="display_personne">
          <ng-container *ngFor="let potentiel of All">
        <ng-container *ngIf="!potentiel.statut_seance">
          <ng-container
            *ngIf="potentiel.statut_inscription === 'présent'"
          >
            <div class="ligne">
              <span class="partie1">
                <span class="icon is-medium">
                  <span
                    class="fa-stack fa-sm"
                    (click)="potentiel.isVisible = true"
                  >
                    <i
                      class="fas fa-stack-2x fa-thumbs-up has-text-success"
                    ></i>
                  </span>
                </span>
                <ul
                  class="menu-icons"
                  [ngClass]="{
                    'is-visible': potentiel.isVisible,
                    not: !potentiel.isVisible
                  }"
                >
                  <li (click)="setStatus('présent', potentiel)">
                    <i class="fas fa-thumbs-up"></i> Présent
                  </li>
                  <li (click)="setStatus('absent', potentiel)">
                    <i class="fas fa-thumbs-down"></i> Absent
                  </li>
                  <li (click)="setStatus('essai', potentiel)">
                    <i class="fas fa-question"></i> Essai
                  </li>
                  <li (click)="setStatus('convoqué', potentiel)">
                    <i class="fas fa-hand-point-up"></i> Convoqué
                  </li>
                  <li (click)="setStatus(null, potentiel)">
                    <i class="fas fa-ellipsis-h"></i> Non défini
                  </li>
                </ul>
                <span class="nom_personne">{{
                  potentiel.person.libelle
                }}</span>
                <span [title]="contact_urgence_nom(potentiel)">{{
                  contact_urgence(potentiel)
                }}</span>
              </span>
              <div class="buttons has-addons">
                <button
                  type="button"
                  class="button is-outlined is-rounded is-primary"
                  (click)="MAJInscription(potentiel, true)"
                  [disabled]="!GetNbPersonne(Presents)"
                >
                  <i class="fas fa-check"></i>
                </button>
                <button
                  type="button"
                  class="button is-outlined is-rounded is-danger"
                  (click)="MAJInscription(potentiel, false)"
                >
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </ng-container>
        </ng-container>
      </ng-container>
      <ng-container *ngFor="let potentiel of All">
        <ng-container *ngIf="!potentiel.statut_seance">
          <ng-container
            *ngIf="potentiel.statut_inscription === 'essai'"
          >
            <div class="ligne">
              <span class="partie1">
                <span class="icon is-medium">
                  <span
                    class="fa-stack fa-sm"
                    (click)="potentiel.isVisible = true"
                  >
                    <i class="fas fa-stack-2x fa-question"></i>
                  </span>
                </span>
                <ul
                  class="menu-icons"
                  [ngClass]="{
                    'is-visible': potentiel.isVisible,
                    not: !potentiel.isVisible
                  }"
                >
                  <li (click)="setStatus('présent', potentiel)">
                    <i class="fas fa-thumbs-up"></i> Présent
                  </li>
                  <li (click)="setStatus('absent', potentiel)">
                    <i class="fas fa-thumbs-down"></i> Absent
                  </li>
                  <li (click)="setStatus('essai', potentiel)">
                    <i class="fas fa-question"></i> Essai
                  </li>
                  <li (click)="setStatus('convoqué', potentiel)">
                    <i class="fas fa-hand-point-up"></i> Convoqué
                  </li>
                  <li (click)="setStatus(null, potentiel)">
                    <i class="fas fa-ellipsis-h"></i> Non défini
                  </li>
                </ul>
                <span class="nom_personne">{{
                  potentiel.person.libelle
                }}</span>
                <span [title]="contact_urgence_nom(potentiel)">{{
                  contact_urgence(potentiel)
                }}</span>
              </span>
              <div class="buttons has-addons">
                <button
                  type="button"
                  class="button is-outlined is-rounded is-primary"
                  (click)="MAJInscription(potentiel, true)"
                  [disabled]="!GetNbPersonne(Presents)"
                >
                  <i class="fas fa-check"></i>
                </button>
                <button
                  type="button"
                  class="button is-outlined is-rounded is-danger"
                  (click)="MAJInscription(potentiel, false)"
                >
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </ng-container>
        </ng-container>
      </ng-container>
      <ng-container *ngFor="let potentiel of All">
        <ng-container *ngIf="!potentiel.statut_seance">
          <ng-container
            *ngIf="potentiel.statut_inscription === 'convoqué'"
          >
            <div class="ligne">
              <span class="partie1">
                <span class="icon is-medium">
                  <span
                    class="fa-stack fa-sm"
                    (click)="potentiel.isVisible = true"
                  >
                    <i
                      class="fas fa-stack-2x fa-hand-point-up has-text-info"
                    ></i>
                  </span>
                </span>
                <ul
                  class="menu-icons"
                  [ngClass]="{
                    'is-visible': potentiel.isVisible,
                    not: !potentiel.isVisible
                  }"
                >
                  <li (click)="setStatus('présent', potentiel)">
                    <i class="fas fa-thumbs-up"></i> Présent
                  </li>
                  <li (click)="setStatus('absent', potentiel)">
                    <i class="fas fa-thumbs-down"></i> Absent
                  </li>
                  <li (click)="setStatus('essai', potentiel)">
                    <i class="fas fa-question"></i> Essai
                  </li>
                  <li (click)="setStatus('convoqué', potentiel)">
                    <i class="fas fa-hand-point-up"></i> Convoqué
                  </li>
                  <li (click)="setStatus(null, potentiel)">
                    <i class="fas fa-ellipsis-h"></i> Non défini
                  </li>
                </ul>
                <span class="nom_personne">{{
                  potentiel.person.libelle
                }}</span>
                <span [title]="contact_urgence_nom(potentiel)">{{
                  contact_urgence(potentiel)
                }}</span>
              </span>
              <div class="buttons has-addons">
                <button
                  type="button"
                  class="button is-outlined is-rounded is-primary"
                  (click)="MAJInscription(potentiel, true)"
                  [disabled]="!GetNbPersonne(Presents)"
                >
                  <i class="fas fa-check"></i>
                </button>
                <button
                  type="button"
                  class="button is-outlined is-rounded is-danger"
                  (click)="MAJInscription(potentiel, false)"
                >
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </ng-container>
        </ng-container>
      </ng-container>
      <ng-container *ngFor="let potentiel of All">
        <ng-container *ngIf="!potentiel.statut_seance">
          <ng-container
            *ngIf="potentiel.statut_inscription === 'absent'"
          >
            <div class="ligne">
              <span class="partie1">
                <span class="icon is-medium">
                  <span
                    class="fa-stack fa-sm"
                    (click)="potentiel.isVisible = true"
                  >
                    <i
                      class="fas fa-stack-2x fa-thumbs-down has-text-danger"
                    ></i>
                  </span>
                </span>
                <ul
                  class="menu-icons"
                  [ngClass]="{
                    'is-visible': potentiel.isVisible,
                    not: !potentiel.isVisible
                  }"
                >
                  <li (click)="setStatus('présent', potentiel)">
                    <i class="fas fa-thumbs-up"></i> Présent
                  </li>
                  <li (click)="setStatus('absent', potentiel)">
                    <i class="fas fa-thumbs-down"></i> Absent
                  </li>
                  <li (click)="setStatus('essai', potentiel)">
                    <i class="fas fa-question"></i> Essai
                  </li>
                  <li (click)="setStatus('convoqué', potentiel)">
                    <i class="fas fa-hand-point-up"></i> Convoqué
                  </li>
                  <li (click)="setStatus(null, potentiel)">
                    <i class="fas fa-ellipsis-h"></i> Non défini
                  </li>
                </ul>
                <span class="nom_personne">{{
                  potentiel.person.libelle
                }}</span>
                <span [title]="contact_urgence_nom(potentiel)">{{
                  contact_urgence(potentiel)
                }}</span>
              </span>
              <div class="buttons has-addons">
                <button
                  type="button"
                  class="button is-outlined is-rounded is-primary"
                  (click)="MAJInscription(potentiel, true)"
                  [disabled]="!GetNbPersonne(Presents)"
                >
                  <i class="fas fa-check"></i>
                </button>
                <button
                  type="button"
                  class="button is-outlined is-rounded is-danger"
                  (click)="MAJInscription(potentiel, false)"
                >
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </ng-container>
        </ng-container>
      </ng-container>
      <ng-container *ngFor="let potentiel of All">
        <ng-container *ngIf="!potentiel.statut_seance">
          <ng-container *ngIf="!potentiel.statut_inscription">
            <div class="ligne">
              <span class="partie1">
                <span class="icon is-medium">
                  <span
                    class="fa-stack fa-sm"
                    (click)="potentiel.isVisible = true"
                  >
                    <i class="fas fa-stack-2x fa-ellipsis-h"></i>
                  </span>
                </span>
                <ul
                  class="menu-icons"
                  [ngClass]="{
                    'is-visible': potentiel.isVisible,
                    not: !potentiel.isVisible
                  }"
                >
                  <li (click)="setStatus('présent', potentiel)">
                    <i class="fas fa-thumbs-up"></i> Présent
                  </li>
                  <li (click)="setStatus('absent', potentiel)">
                    <i class="fas fa-thumbs-down"></i> Absent
                  </li>
                  <li (click)="setStatus('essai', potentiel)">
                    <i class="fas fa-question"></i> Essai
                  </li>
                  <li (click)="setStatus('convoqué', potentiel)">
                    <i class="fas fa-hand-point-up"></i> Convoqué
                  </li>
                  <li (click)="setStatus(null, potentiel)">
                    <i class="fas fa-ellipsis-h"></i> Non défini
                  </li>
                </ul>
                <span class="nom_personne">{{
                  potentiel.person.libelle
                }}</span>
                <span [title]="contact_urgence_nom(potentiel)">{{
                  contact_urgence(potentiel)
                }}</span>
              </span>
              <div class="buttons has-addons">
                <button
                  type="button"
                  class="button is-outlined is-rounded is-primary"
                  (click)="MAJInscription(potentiel, true)"
                  [disabled]="!GetNbPersonne(Presents)"
                >
                  <i class="fas fa-check"></i>
                </button>
                <button
                  type="button"
                  class="button is-outlined is-rounded is-danger"
                  (click)="MAJInscription(potentiel, false)"
                >
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </ng-container>
        </ng-container>
      </ng-container>
                    <h6  style="cursor:pointer;"
                class="title is-6"
                (click)="
                  display_present
                    ? (display_present = false)
                    : (display_present = true)
                "
              >
                <i *ngIf="!display_present" class="fas fa-chevron-down"></i>
                <i *ngIf="display_present" class="fas fa-chevron-up"></i> &nbsp;
                <span i18n>Présents</span>&nbsp;({{ Presents.length }}&nbsp;<span
                  i18n
                  >personnes</span
                >)
              </h6>
                </span>
             <span *ngIf="display_present">
                <ng-container *ngFor="let potentiel of Presents">
                  <ng-container *ngIf="potentiel.statut_seance">
                    <ng-container *ngIf="potentiel.statut_seance === 'présent'">
                      <div class="ligne">
                        <span class="partie1">
                          <span class="icon is-medium">
                            <span class="fa-stack fa-sm">
                              <i
                                *ngIf="potentiel.statut_inscription == 'présent'"
                                class="fas fa-stack-2x fa-thumbs-up"
                              ></i>
                              <i
                                *ngIf="potentiel.statut_inscription == 'absent'"
                                class="fas fa-stack-2x fa-thumbs-down"
                              ></i>
                              <i
                                *ngIf="potentiel.statut_inscription == 'essai'"
                                class="fas fa-stack-2x fa-question"
                              ></i>
                              <i
                                *ngIf="
                                  potentiel.statut_inscription == 'convoqué'
                                "
                                class="fas fa-stack-2x fa-hand-point-up"
                              ></i>
                              <i
                                *ngIf="potentiel.statut_inscription == null"
                                class="fas fa-stack-2x fa-ellipsis-h"
                              ></i>
                            </span>
                          </span>
                          <span class="nom_personne">{{
                            potentiel.person.libelle
                          }}</span>
                          <span [title]="contact_urgence_nom(potentiel)">{{
                            contact_urgence(potentiel)
                          }}</span>
                        </span>

                        <div class="buttons has-addons">
                          <button
                            type="button"
                            class="button is-rounded is-primary"
                            (click)="MAJInscription(potentiel, null)"
                          >
                            <i class="fas fa-check"></i>
                          </button>
                          <button
                            type="button"
                            class="button is-outlined is-rounded is-danger"
                            (click)="MAJInscription(potentiel, false)"
                          >
                            <i class="fas fa-times"></i>
                          </button>
                        </div>
                      </div>
                    </ng-container>
                  </ng-container>
                </ng-container>
              </span>
              <h6  style="cursor:pointer;"
                class="title is-6"
                (click)="
                  display_absent
                    ? (display_absent = false)
                    : (display_absent = true)
                "
              >
                <i *ngIf="!display_absent" class="fas fa-chevron-down"></i>
                <i *ngIf="display_absent" class="fas fa-chevron-up"></i> &nbsp;
                <span i18n>Absents</span>&nbsp;({{ Absents.length }}&nbsp;<span
                  i18n
                  >personnes</span
                >)
              </h6>
              <span *ngIf="display_absent">
              <ng-container *ngFor="let potentiel of Absents">
                <ng-container *ngIf="potentiel.statut_seance">
                  <ng-container *ngIf="potentiel.statut_seance === 'absent'">
                    <div class="ligne">
                      <span class="partie1">
                        <span class="icon is-medium">
                          <span class="fa-stack fa-sm">
                            <i
                              *ngIf="potentiel.statut_inscription == 'présent'"
                              class="fas fa-stack-2x fa-thumbs-up"
                            ></i>
                            <i
                              *ngIf="potentiel.statut_inscription == 'absent'"
                              class="fas fa-stack-2x fa-thumbs-down"
                            ></i>
                            <i
                              *ngIf="potentiel.statut_inscription == 'essai'"
                              class="fas fa-stack-2x fa-question"
                            ></i>
                            <i
                              *ngIf="potentiel.statut_inscription == 'convoqué'"
                              class="fas fa-stack-2x fa-hand-point-up"
                            ></i>
                            <i
                              *ngIf="potentiel.statut_inscription == null"
                              class="fas fa-stack-2x fa-ellipsis-h"
                            ></i>
                          </span>
                        </span>
                        <span class="nom_personne">{{
                          potentiel.person.libelle
                        }}</span>
                        <span [title]="contact_urgence_nom(potentiel)">{{
                          contact_urgence(potentiel)
                        }}</span>
                      </span>

                      <div class="buttons has-addons">
                        <button
                          type="button"
                          class="button is-outlined is-rounded is-primary"
                          [disabled]="!GetNbPersonne(Presents)"
                          (click)="MAJInscription(potentiel, true)"
                        >
                          <i class="fas fa-check"></i>
                        </button>
                        <button
                          type="button"
                          class="button is-rounded is-danger"
                          (click)="MAJInscription(potentiel, null)"
                        >
                          <i class="fas fa-times"></i>
                        </button>
                      </div>
                    </div>
                  </ng-container>
                </ng-container>
              </ng-container></span>
      </ng-container>
    </div>
  </span>

</ng-container>
<ng-container *ngIf="isLien">
     <div class="box is-light">
    <div class="is-flex is-justify-content-space-between is-align-items-center mb-3">
      <h3 class="subtitle is-6 has-text-primary has-text-weight-semibold" i18n>Mes adhérents</h3>
       <btn *ngIf="thisSeance.afficher_present"
        [type_button]="'RetourLight'" 
        (click)="isLien = false;" 
      ></btn> 
      <btn *ngIf="!thisSeance.afficher_present"
        [type_button]="'RetourLight'" 
        (click)="AfficherMenu()" 
      ></btn>
            
    </div>

    <div class="columns is-vcentered">
      <div class="column">
      <ng-container *ngIf="!MesAdherents || MesAdherents.length==0; else MesAdherentsOK">
        <p>Vous n'avez pas d'adhérents concernés par la séance</p>
      </ng-container>
      <ng-template #MesAdherentsOK>
        <ng-container *ngFor="let adh of MesAdherents">
            <div class="ligne">
                <span class="partie1" style="gap:20px">
                          <span class="icon is-medium" style="gap:20px">
                            <span
                              class="fa-stack fa-sm" (click)="ChangerPresent(adh, true)"
                            >
                              <i [ngClass]="IsPresent(adh) ? 'fas fa-stack-2x fa-thumbs-up has-text-success' : 'fas fa-stack-2x fa-thumbs-up'" ></i>
                            </span>
                            <span
                              class="fa-stack fa-sm" (click)="ChangerPresent(adh, false)"
                            >
                              <i [ngClass]="IsAbsent(adh) ? 'fas fa-stack-2x fa-thumbs-down has-text-danger' : 'fas fa-stack-2x fa-thumbs-down'" ></i>
                            </span>
                          </span>
  <span class="nom_personne">{{
                            adh.person.libelle
                          }}</span>
                          </span>
                        </div>
        </ng-container>
                  
      </ng-template>      
        </div>     
        </div>

</div>
</ng-container>

</ng-container>
</ng-container>
<ng-template #NonConnecte>
  <app-login [context]="'SEANCE'" ></app-login>
</ng-template>
